syntax = "proto3";

import "google/protobuf/timestamp.proto";

package webarchiver.v1;

service RevisionsService {
  rpc ListRevisions(ListRevisionsRequest) returns (ListRevisionsResponse) {}
  rpc GetRevision(GetRevisionRequest) returns (Revision) {}
}

message ListRevisionsRequest {
  // Offset of the query for pagination
  uint32 offset = 1;

  // Limit per page of the query for pagination
  uint32 limit = 2;

  // Page ID
  uint32 page_id = 3;
}

message ListRevisionsResponse {
  repeated Revision data = 1;
}

message GetRevisionRequest {
  uint32 id = 1;
}

message Revision {
  uint32 id = 1;
  google.protobuf.Timestamp created_at = 2;
  google.protobuf.Timestamp updated_at = 3;
  google.protobuf.Timestamp deleted_at = 4;
//  string title = 11; // TODO: !
  google.protobuf.Timestamp timestamp = 12;
  google.protobuf.Timestamp scanned_at = 13;
  bool text_hidden = 14;
  uint32 total_sources_count = 20;
  uint32 unarchived_sources_count = 21;
}
